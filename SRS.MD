# Proof of Concept: System ZakÅ‚adu Pogrzebowego
**Pre-need, Nagrobki Online, Transmisje Ceremonii**

**Data:** 23.01.2026  
**Wersja:** 0.1 (demonstracja moÅ¼liwoÅ›ci)  
**Autor:** ZespÃ³Å‚ projektowy (Osoba 1)

---

## 1. Cel Proof of Concept

Demonstracja wykonalnoÅ›ci kluczowych funkcjonalnoÅ›ci systemu w ramach MVP:

- **Pre-need** â€“ utworzenie planu pogrzebowego z wyprzedzeniem  
- **Nagrobki online** â€“ konfiguracja i wycena nagrobka  
- **Transmisje** â€“ generowanie prywatnego linku i symulacja doÅ‚Ä…czenia  

PoC potwierdza, Å¼e wymagania z SRS sÄ… technicznie wykonalne przy zaÅ‚oÅ¼onym budÅ¼ecie  
(**1500â€“2000 PLN/mc infrastruktura**) i harmonogramie.

---

## 2. ZaÅ‚oÅ¼enia techniczne PoC

### Infrastruktura (1500 PLN/mc)

- **Frontend:** React 18 + Vite (development)
- **Backend:** Node.js 20 + Express + TypeScript
- **Baza:** PostgreSQL 16 (Supabase â€“ darmowy tier)
- **PÅ‚atnoÅ›ci:** Stripe (test mode)
- **Powiadomienia:** Resend (email) + Vonage (SMS)
- **Streaming:** AWS IVS lub Cloudflare Stream
- **CDN:** Cloudflare (darmowy tier)
- **Deployment:** Vercel (frontend) + Render (backend)

### Kluczowe integracje (mock / symulacja)

- Stripe â€“ mock webhooki pÅ‚atnoÅ›ci  
- Streaming API â€“ mock endpointy (IVS / Cloudflare)  
- Email/SMS â€“ Resend / Vonage sandbox  

---

## 3. Demo flow (end-to-end)

### ðŸŽ¬ Scenariusz 1: Klient tworzy plan pre-need

1. Klient wchodzi na `/pre-need` â†’ formularz krokowy  
2. Wybiera: trumna drewniana, 2 wieÅ„ce, nagrobek granit, kremacja  
3. System generuje wycenÄ™: **18 500 PLN**  
4. Klient zapisuje draft â†’ dostaje email z linkiem do edycji  
5. [Screenshot: formularz + podsumowanie kosztÃ³w]  

**Weryfikacja:**

- WF-PN-001: âœ“ Plan zapisany jako draft  
- WNF-PERF-010: âœ“ Czas odpowiedzi < 1.5s  

---

### ðŸŽ¬ Scenariusz 2: Klient konfiguruje i zamawia nagrobek

1. Katalog `/nagrobki` â†’ filtr: granit, `< 10 000 PLN`  
2. Karta produktu â†’ Konfigurator:
   - Wymiary: 100Ã—60Ã—8 cm  
   - Napis: *"Jan Kowalski 1950â€“2026"*  
   - Dodatki: wazon, krzyÅ¼  
3. Wycena: **8 750 PLN** (montaÅ¼ w cenie)  
4. Koszyk â†’ Checkout â†’ Stripe (test card)  
5. Status: *â€žProjekt do akceptacjiâ€* â†’ email do klienta  

**Weryfikacja:**

- WF-NG-002: âœ“ Konfigurator dziaÅ‚a  
- WNF-SEC-010: âœ“ Brak przechowywania danych kart  

---

### ðŸŽ¬ Scenariusz 3: Transmisja ceremonii (operator + uczestnik)

1. Operator `/operator` â†’ harmonogram ceremonii â†’ **Uruchom transmisjÄ™**  
2. Test A/V â†’ zielona dioda âœ“ â†’ *Gotowe do startu*  
3. System generuje token â†’  
   `https://stream.pl/watch?t=abc123XYZ`  
4. Organizator wysyÅ‚a SMS/email z linkiem  
5. Uczestnik klika link â†’ HLS player startuje w < 3s  

**Weryfikacja:**

- WF-TR-003: âœ“ Join bez rejestracji  
- WNF-AV-001: âœ“ DostÄ™pnoÅ›Ä‡ 99.5%  

---

## 4. Implementacja (kod + architektura)

### Backend (Node.js + Express)

```ts
// /api/pre-need/create
app.post('/api/pre-need/create', async (req, res) => {
  const plan = await db.preNeed.create({
    data: {
      customerId: req.user.id,
      services: req.body.services,
      totalCost: calculateCost(req.body),
      status: 'draft'
    }
  });
  await sendEmail(req.user.email, 'plan-link', { 
    editUrl: `https://app.pl/pre-need/${plan.id}/edit` 
  });
  res.json(plan);
});

// /api/stream/create-token  
app.post('/api/stream/create-token', async (req, res) => {
  const token = generateToken({ ceremonyId: req.body.ceremonyId });
  const playbackUrl = `https://stream.pl/watch?t=${token}`;
  await sendSMS(req.body.phone, 'join-link', { url: playbackUrl });
  res.json({ playbackUrl, expiresAt: token.expires });
});
